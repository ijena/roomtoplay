<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io("/impostor");
  const name = localStorage.getItem("playerName");
  const roomCode = localStorage.getItem("roomCode");

  document.getElementById("roomInfo").innerText = `Welcome ${name}! Room: ${roomCode}`;

  // Emit a "reconnect" event on load in case the socket is new
  socket.emit("rejoin-room", { playerName: name, roomCode });

  socket.on("prompt", ({ prompt }) => {
    document.getElementById("promptDisplay").innerText = `Your prompt: ${prompt}`;
  });

  socket.on("host-assigned", ({ message }) => {
    alert(message);
    document.getElementById("hostControls").style.display = "block";
  });

  // NEW: Make sure host sees button if they just created the room
  socket.on("room-created", () => {
    document.getElementById("hostControls").style.display = "block";
  });

  // Optionally show UI if joined normally
  socket.on("joined-room", () => {
    console.log("Joined room");
  });

  function startRound() {
    socket.emit("start-round");
  }
</script>
