<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Game Lobby</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin-top: 60px;
    }
    #promptDisplay {
      margin-top: 40px;
      font-size: 20px;
      font-weight: bold;
    }
    #hostControls {
      margin-top: 30px;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin: 5px;
    }
  </style>
</head>
<body>
  <h1>üïµÔ∏è Game Lobby</h1>

  <p id="roomInfo"></p>

  <div id="hostControls" style="display: none;">
    <button onclick="startRound()">‚ñ∂Ô∏è Start Round</button>
  </div>

  <div id="promptDisplay"></div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io("/impostor");

    const playerName = localStorage.getItem("playerName");
    const roomCode = localStorage.getItem("roomCode");

    if (!playerName || !roomCode) {
      alert("Missing player info. Please go back to the homepage.");
      window.location.href = "index.html";
    }

    document.getElementById("roomInfo").innerText =
      `Welcome, ${playerName}! Room Code: ${roomCode}`;

    // Tell server we want to rejoin this room (in case of reload)
    socket.emit("rejoin-room", { playerName, roomCode });

    

socket.on("host-assigned", ({ message }) => {
  console.log(message);
  document.getElementById("hostControls").style.display = "block";
});




    // Show prompt when the round starts
    socket.on("prompt", ({ prompt }) => {
      document.getElementById("promptDisplay").innerText = `Your prompt: ${prompt}`;
    });

    // Handle joining confirmation
    socket.on("joined-room", () => {
      console.log(`Joined room ${roomCode}`);
    });

    // Handle errors from server
    socket.on("error", (msg) => {
      alert("‚ùå " + msg);
    });

    function startRound() {
      socket.emit("start-round");
    }
  </script>
</body>
</html>
